Site={mobileThreshold:601,init:function(){var _this=this;$(window).resize(function(){_this.onResize()}),_this.Chairs.init(),_this.About.init()},onResize:function(){},fixWidows:function(){$(".js-fix-widows").each(function(){var string=$(this).html();string=string.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(string)})},hideLoading:function(){$("#loading-screen").addClass("hide")}},Site.Chairs={tail:[],tailSize:9,listSize:86400,bufferTime:4,imgDirPath:"http://d1r8hiz683c1rx.cloudfront.net/",lastChairTime:null,stop:!1,init:function(){var _this=this;_this.imagesContainer=document.querySelector("#images-container"),_this.currentPosition=_this.getSecsToday()+_this.bufferTime,_this.isDev()&&(_this.currentPosition=1,_this.listSize=120,_this.imgDirPath="/dev_chairs/"),_this.initTail(),_this.bind()},isDev:function(){return"#dev"===location.hash},bind:function(){var _this=this;document.addEventListener("visibilitychange",_this.handleVisibilityChange.bind(_this),!1)},handleVisibilityChange:function(){var _this=this;document.hidden?_this.stop=!0:_this.reinitTail()},initTail:function(){var _this=this;_this.loadTail(),_this.appendImages(),_this.triggerTimer(1e3*_this.bufferTime)},reinitTail:function(){var _this=this;_this.stop=!1,_this.currentPosition=_this.getSecsToday(),_this.isDev()&&(_this.currentPosition=60),_this.clearChairs(),_this.loadTail(),_this.appendImages(),_this.triggerTimer(0)},loadTail:function(){for(var _this=this,i=0;i<=_this.tailSize;i++)_this.tail[i]=i+_this.currentPosition},appendImages:function(){for(var _this=this,i=0;i<_this.tail.length;i++)_this.imagesContainer.append(_this.generateImage(_this.tail[i]))},triggerTimer:function(delay){var _this=this;setTimeout(function(){window.requestAnimationFrame(_this.nextChair.bind(_this)),Site.hideLoading()},delay)},nextChair:function(){var _this=this,currentDate=+new Date;null===_this.lastChairTime&&(_this.lastChairTime=currentDate),_this.passedASecond(currentDate)&&(console.log(currentDate-_this.lastChairTime),_this.currentPosition+=1,_this.currentPosition>_this.listSize&&(_this.currentPosition=1),_this.shiftChair(),_this.pushChair(),_this.lastChairTime=currentDate),_this.stop||window.requestAnimationFrame(_this.nextChair.bind(_this))},passedASecond:function(currentDate){var _this=this;return currentDate-_this.lastChairTime>=1e3},shiftChair:function(){$(".image-holder").first().remove()},clearChairs:function(){$(".image-holder").remove()},pushChair:function(){var _this=this,image=_this.currentPosition+_this.tailSize;_this.imagesContainer.append(_this.generateImage(image))},formatName:function(base){var _this=this;return _this.padNumber(base)+".jpeg"},generateImage:function(base){var _this=this,filename=_this.formatName(base),imageHolder=document.createElement("div"),image=document.createElement("img");return imageHolder.className="image-holder grid-row justify-center align-items-center",imageHolder.id="image-"+base,image.setAttribute("src",_this.imgDirPath+filename),imageHolder.appendChild(image),imageHolder},getSecsToday:function(){var date=new Date;return date.getSeconds()+60*(date.getMinutes()+60*date.getHours())},padNumber:function(num){for(var s=num+"";s.length<4;)s="0"+s;return s},floorToSeconds:function(timestamp){return 1e3*Math.floor(timestamp/1e3)},ceilToSeconds:function(timestamp){return 1e3*Math.ceil(timestamp/1e3)}},Site.About={init:function(){var _this=this;_this.thinkOf(),_this.bindClicks()},thinkOf:function(){var switchThinkOf=function(){var $currentItem=$(".think-of-item.show");$(".think-of-item.show").removeClass("show"),$currentItem.next(".think-of-item").length?$currentItem.next().addClass("show"):$(".think-of-item:first-of-type").addClass("show")};window.setInterval(switchThinkOf,2e3)},bindClicks:function(){$("#info-button").on("click",function(){$("html, body").animate({scrollTop:$(document).height()-$(window).height()})}),$(".image-holder").on("click",function(){$("html, body").animate({scrollTop:0})})}},jQuery(document).ready(function(){"use strict";Site.init()});
//# sourceMappingURL=main.min.js.map
